[Unit]
Description=Janus Gateway
Requires=network.target
After=syslog.target network.target network-online.target

[Service]
Type=simple
User={{ janus_user }}
RuntimeDirectory={{ janus_user }}
LogsDirectory={{ janus_user }}
RuntimeDirectoryMode=755
WorkingDirectory={{ janus_install_dir }}

ExecStart={{ janus_install_dir }}/bin/janus \
    --cwd-path={{ janus_install_dir }} \
    --configs-folder={{ janus_conf_dir }} \
    --log-file={{ janus_log_file }}

{% for cmd in janus_exec_start_post %}
ExecStartPost={{ cmd }}
{% endif %}
Restart=on-failure
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target