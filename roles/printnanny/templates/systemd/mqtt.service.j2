[Unit]
Description=Print Nanny MQTT Client
After=network.target network-online.target printnanny-metadata@mqtt.service printnanny-metadata@env.service
Wants=network.target network-online.target printnanny-metadata@mqtt.service printnanny-metadata@env.service
PartOf=printnanny.target


[Service]
Type=simple
SyslogIdentifier=printnanny-mqtt
EnvironmentFile=-{{ printnanny_env }}
ExecStart=/usr/local/bin/printnanny mqtt subscribe
User={{ printnanny_user }}

{% if printnanny_mqtt_log is defined %}
StandardOutput=file:{{ printnanny_mqtt_log }}.stdout
StandardError=file:{{ printnanny_mqtt_log }}.stderr
{% endif %}

Restart=on-failure
RestartSec=10

[Install]
WantedBy=multi-user.target