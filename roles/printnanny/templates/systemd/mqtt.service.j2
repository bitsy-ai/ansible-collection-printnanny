[Unit]
Description=Print Nanny MQTT Client
After=network.target network-online.target printnanny-metadata.target
Wants=network.target network-online.target printnanny-metadata.target
PartOf=printnanny.target


[Service]
Type=simple
EnvironmentFile=-{{ printnanny_env }}
ExecStart=/usr/local/bin/printnanny mqtt subscribe \
    --private-key ${PRINTNANNY_EC_PRIVATE_KEY} \
    --public-key ${PRINTNANNY_EC_PUBLIC_KEY} \
    --ca-certs ${PRINTNANNY_CA_CERTS}
User={{ printnanny_user }}

Restart=on-failure
RestartSec=600

[Install]
WantedBy=multi-user.target