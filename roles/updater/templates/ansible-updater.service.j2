# {{ ansible_managed }}
[Unit]
Description=Install latest {{ updater_collection }} Ansible Collection
Wants=network-online.target
After=network-online.target
{% if updater_service_unit_extra is defined %}
{{ updater_service_unit_extra }}
{% endif %}

[Service]
Type=oneshot
RuntimeDirectory={{ updater_user }}
User={{ updater_user }}
ExecStart={{ updater_venv }}/bin/ansible-galaxy \
    collection install --upgrade {{ updater_collection_url }}
Restart=on-failure
RestartSec=20

[Install]
WantedBy=multi-user.target